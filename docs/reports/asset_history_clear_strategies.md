# ðŸ§¹ Algorithm Analysis: Asset History Clear Strategies

*Date: 2026-01-17*
*Topic: Asset Balance vs. Transaction History Synchronization*

## 1. ë°°ê²½ (Background)
SmartPennyì˜ ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°ëŠ” **ì´ì¤‘ êµ¬ì¡°(Dual Truth)**ë¥¼ ê°€ì§€ê³  ìžˆìŠµë‹ˆë‹¤.
*   **Transactions Table**: ìž…ì¶œê¸ˆ ë‚´ì—­ (Log)
*   **Assets Table**: í˜„ìž¬ ìž”ì•¡ (Snapshot)

ì´ ë‘ í…Œì´ë¸”ì€ í‰ì†Œì—ëŠ” ë™ê¸°í™”ë˜ì–´ ì›€ì§ì´ì§€ë§Œ, "ë‚´ì—­ ì´ˆê¸°í™”(Clear History)" ê¸°ëŠ¥ì„ ìˆ˜í–‰í•  ë•Œ **ìž”ì•¡(Snapshot)ì„ ì–´ë–»ê²Œ ì²˜ë¦¬í•  ê²ƒì¸ê°€**ì— ë”°ë¼ ë‘ ê°€ì§€ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ë‚˜ë‰©ë‹ˆë‹¤.

---

## 2. ì•Œê³ ë¦¬ì¦˜ ë¹„êµ (Algorithm Comparison)

### ðŸš¨ Option A: ì™„ì „ ì´ˆê¸°í™” (Complete Reset)
**"ì´ ìžì‚°ì„ ì²˜ìŒ ìƒì„±í–ˆì„ ë•Œë¡œ ë˜ëŒë¦°ë‹¤."**

*   **ë™ìž‘ ì›ë¦¬**:
    1.  `Transactions` í…Œì´ë¸”ì—ì„œ í•´ë‹¹ ìžì‚°ì˜ **ëª¨ë“  ë‚´ì—­ ì‚­ì œ**.
    2.  `Assets` í…Œì´ë¸”ì˜ `balance` ê°’ì„ **0** (ë˜ëŠ” ì‚¬ìš©ìžê°€ ì§€ì •í•œ ì´ˆê¸° ìž”ì•¡)ìœ¼ë¡œ **ê°•ì œ ì—…ë°ì´íŠ¸**.
*   **SQL ë¡œì§**:
    ```sql
    DELETE FROM transactions WHERE asset_id = 'A';
    UPDATE assets SET balance = 0 WHERE id = 'A';
    ```
*   **ìž¥ì  (Pros)**:
    *   **ì§ê´€ì **: "ì‹¹ ì§€ì› ìœ¼ë‹ˆ 0ì›ì´ê² ì§€"ë¼ëŠ” ì‚¬ìš©ìžì˜ ì¼ë°˜ì ì¸ ë©˜íƒˆ ëª¨ë¸ê³¼ ì¼ì¹˜í•©ë‹ˆë‹¤.
    *   **ë°ì´í„° ë¬´ê²°ì„±**: ë‚´ì—­ì´ ì—†ëŠ”ë° ìž”ì•¡ì´ ë‚¨ì•„ìžˆëŠ” ë¶ˆì¼ì¹˜ ìƒíƒœê°€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
*   **ë‹¨ì  (Cons)**:
    *   ë§Œì•½ ì‚¬ìš©ìžê°€ "ë‚´ì—­ë§Œ ë³´ê¸° ì‹«ê³  ìž”ì•¡ì€ ìœ ì§€í•˜ê³  ì‹¶ì€ ê²½ìš°" (ì˜ˆ: ì˜¤ëž˜ëœ ë‚´ì—­ ì •ë¦¬)ì—ëŠ” ë¶ˆíŽ¸í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. (ë‹¤ì‹œ ìž”ì•¡ì„ ìž…ë ¥í•´ì•¼ í•¨)

### ðŸ§¹ Option B: ë‚´ì—­ë§Œ ì •ë¦¬ (Log Clear Only) - *í˜„ìž¬ ìƒíƒœ*
**"ìž¥ë¶€ëŠ” ì°¢ì–´ë²„ë¦¬ë˜, ê¸ˆê³ ì— ìžˆëŠ” ëˆì€ ë†”ë‘”ë‹¤."**

*   **ë™ìž‘ ì›ë¦¬**:
    1.  `Transactions` í…Œì´ë¸”ì—ì„œ í•´ë‹¹ ìžì‚°ì˜ **ëª¨ë“  ë‚´ì—­ ì‚­ì œ**.
    2.  `Assets` í…Œì´ë¸”ì˜ `balance`ëŠ” **ê±´ë“œë¦¬ì§€ ì•ŠìŒ**.
*   **SQL ë¡œì§**:
    ```sql
    DELETE FROM transactions WHERE asset_id = 'A';
    -- Assets table update skipped
    ```
*   **ìž¥ì  (Pros)**:
    *   **ìž”ì•¡ ìœ ì§€**: í˜„ìž¬ ì‹¤ì œ ê°€ì§€ê³  ìžˆëŠ” ëˆì´ ì–¼ë§ˆì¸ì§€ëŠ” ê¸°ì–µí•˜ê³  ìžˆìœ¼ë¯€ë¡œ, ìžì‚° í˜„í™©íŒ(Net Worth)ì€ ê·¸ëŒ€ë¡œ ìœ ì§€ë©ë‹ˆë‹¤.
    *   **ë‹¨ìˆœ ì •ë¦¬ìš©**: ë‹¨ìˆœížˆ "ë„ˆë¬´ ë§Žì•„ì§„ ë‚´ì—­"ì„ ë¹„ìš°ê³  ì‹¶ì„ ë•Œ ìœ ìš©í•©ë‹ˆë‹¤.
*   **ë‹¨ì  (Cons)**:
    *   **í˜¼ëž€ ìœ ë°œ**: "ë‚´ì—­ì´ í•˜ë‚˜ë„ ì—†ëŠ”ë° ì™œ 100ë§Œì›ì´ ìžˆì§€?"ë¼ëŠ” ì˜ë¬¸ì„ ê°–ê²Œ í•©ë‹ˆë‹¤. (í˜„ìž¬ ì‚¬ìš©ìžê°€ ê²ªì€ í˜¼ëž€)
    *   **ë°ì´í„° ì¶œì²˜ ë¶ˆëª…**: ì´ 100ë§Œì›ì´ ì–´ë””ì„œ ì™”ëŠ”ì§€ ì¦ëª…í•  ë°©ë²•ì´ ì‚¬ë¼ì§‘ë‹ˆë‹¤ (Ghost Money).

---

## 3. ì¶”ì²œ ì•Œê³ ë¦¬ì¦˜ (Recommendation)

**Option A (ì™„ì „ ì´ˆê¸°í™”)**ë¥¼ ê°•ë ¥ížˆ ì¶”ì²œí•©ë‹ˆë‹¤.

**ì´ìœ **:
1.  ê¸ˆìœµ ì•±ì—ì„œ **"ê·¼ê±° ì—†ëŠ” ìž”ì•¡"**ì„ ë‚¨ê²¨ë‘ëŠ” ê²ƒì€ ë°ì´í„° ì‹ ë¢°ë„ë¥¼ ë–¨ì–´ëœ¨ë¦½ë‹ˆë‹¤.
2.  ì‚¬ìš©ìžê°€ ë‚´ì—­ì„ ì§€ìš´ë‹¤ëŠ” ê²ƒì€ ë³´í†µ "ë‹¤ì‹œ ì‹œìž‘í•˜ê³  ì‹¶ë‹¤"ëŠ” ì˜ë„ê°€ í½ë‹ˆë‹¤.
3.  ë§Œì•½ ìž”ì•¡ì„ ìœ ì§€í•˜ê³  ì‹¶ë‹¤ë©´, ì´ˆê¸°í™” í›„ **"ì´ˆê¸° ìž”ì•¡(Initial Balance)"** í•­ëª©ìœ¼ë¡œ 1ê±´ì„ ìƒˆë¡œ ìž…ë ¥í•˜ëŠ” ê²ƒì´ ë°ì´í„° ê´€ë¦¬ìƒ í›¨ì”¬ ê¹”ë”í•©ë‹ˆë‹¤.

---

## 4. ì œì•ˆí•˜ëŠ” UX Flow
1.  ì‚¬ìš©ìžê°€ `Clear History` í´ë¦­
2.  ê²½ê³  íŒì—…: "ëª¨ë“  ê±°ëž˜ ë‚´ì—­ì´ ì‚­ì œë˜ë©°, **ìž”ì•¡ë„ 0ì›ìœ¼ë¡œ ì´ˆê¸°í™”**ë©ë‹ˆë‹¤. ì§„í–‰í•˜ì‹œê² ìŠµë‹ˆê¹Œ?"
3.  [í™•ì¸] í´ë¦­ ì‹œ -> `Option A` ì•Œê³ ë¦¬ì¦˜ ì‹¤í–‰
